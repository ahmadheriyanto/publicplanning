<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!--
    Safer insertion into header using xpath="//header".
    Shows portal links only when the logged-in portal user belongs to the corresponding groups.
    This template adds lightweight separators between visible menu items using Bootstrap's "vr" utility
    and a small pipe fallback so the separator appears even if the theme doesn't include the vr helper.
    Modified so separators are hidden on mobile (small) screens.
  -->
  <template id="bcplanning_header_links" inherit_id="website.layout" priority="20">
    <!-- insert inside the header element -->
    <xpath expr="//header" position="inside">
      <div id="bcplanning-portal-menu" class="container d-none d-lg-block mt-1">
        <ul class="nav nav-pills">

          <!-- Projects -->
          <t t-if="request.env.user and request.env.user.has_group('bcplanning.group_bc_projects')">
            <li class="nav-item me-2">
              <a class="nav-link p-1" href="/partner/projects"><strong>Projects</strong></a>
            </li>
            <!-- separator only if Plannings is also shown; hidden on small screens -->
            <t t-if="request.env.user and request.env.user.has_group('bcplanning.group_bc_tasks')">
              <li class="nav-item d-none d-lg-flex align-items-center" aria-hidden="true">
                <span class="vr mx-2 d-none d-lg-inline" aria-hidden="true"></span>
                <!-- pipe fallback for themes without .vr, shown only on lg+ -->
                <span class="text-muted d-none d-lg-inline" aria-hidden="true"></span>
              </li>
            </t>
          </t>

          <!-- Plannings -->
          <t t-if="request.env.user and request.env.user.has_group('bcplanning.group_bc_tasks')">
            <li class="nav-item me-2">
              <a class="nav-link p-1" href="/partner/tasks"><strong>Planning</strong></a>
            </li>
            <!-- separator only if BOR is also shown; hidden on small screens -->
            <t t-if="request.env.user and request.env.user.has_group('bcplanning.group_bc_bor')">
              <li class="nav-item d-none d-lg-flex align-items-center" aria-hidden="true">
                <span class="vr mx-2 d-none d-lg-inline" aria-hidden="true"></span>
                <span class="text-muted d-none d-lg-inline" aria-hidden="true"></span>
              </li>
            </t>
          </t>

          <!-- BOR -->
          <t t-if="request.env.user and request.env.user.has_group('bcplanning.group_bc_bor')">
            <li class="nav-item me-2">
              <a class="nav-link p-1" href="/partner/bor"><strong>Boren</strong></a>
            </li>
            <!-- separator only if Resource is also shown; hidden on small screens -->
            <t t-if="request.env.user and request.env.user.has_group('bcplanning.group_bc_taskresource')">
              <li class="nav-item d-none d-lg-flex align-items-center" aria-hidden="true">
                <span class="vr mx-2 d-none d-lg-inline" aria-hidden="true"></span>
                <span class="text-muted d-none d-lg-inline" aria-hidden="true"></span>
              </li>
            </t>
          </t>

          <!-- Resource -->
          <t t-if="request.env.user and request.env.user.has_group('bcplanning.group_bc_taskresource')">
            <li class="nav-item me-2">
              <a class="nav-link p-1" href="/partner/taskresource"><strong>Resource</strong></a>
            </li>
          </t>

          <!-- Setting (recaptioned Teams -> Setting) pushed to the far right -->
          <t t-if="request.env.user and request.env.user.has_group('bcplanning.group_bc_resources')">
            <li class="nav-item ms-auto">
              <a class="nav-link p-1" href="/partner/resources">
                <i class="fa fa-cog me-1" aria-hidden="true"></i>
                Setting
              </a>
            </li>
          </t>

        </ul>
      </div>

      <!-- small inline color tweak (keeps styling scoped and avoids external CSS) -->
      <style>
        #bcplanning-portal-menu .nav-link { color: #6c757d; }
        #bcplanning-portal-menu .nav-link:hover { color: #000; }
      </style>
    </xpath>
  </template>
</odoo>